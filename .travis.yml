sudo: false
dist: trusty
language: php

cache:
  directories:
    - $HOME/.sonar/cache

addons:
  sonarcloud:
    organization: "wirecard"
    token:
      secure: "jYxnifvhAeQlVDoNRAoG1bFqaE7/abr+vCLnnF5FXR1tLzlx02l0/CKuyvJeeK4Ac8tVOjx4nDBde8L6fSQVzyXr8Gh42qMA+rnNLrDm7+zSNWevhTckBJbQEMMlgpBNvT7BcR0PXTdBTFRroxA3kPIfmr14YJWk9DXfGzZLaCP0n7cUWCdOlaCWRdTFZtlb+2oiTQwbRID6MSbIR6vpDAdl5Q7u2AkauKvTD3yQV+R6VSSTCYCHZCEi3H9kxOPMEeO87ouESKMLhPqYQd0w5xcERxyC3DXhsshADPhdGCcBHJHacn+MAClXlrTzA2J6KjG4B13oRPHiaJ/DsLpT8T16nyU65Mph0mYjQBRFecN9B3a8JmZiLODZL2o1MhCcaToTSFbdtZJ1o2deFDDRZ5mQwpid4Thd1hw3CAxQNN34MkXHy4KNwhFX8rMW6GZRgRRgEPZBbXwW3G/jEVwtjxnCOu29ZtTcSnUHhSlbtoAhmc3ehb/8Whkr5it8ntnE0YXVfLh75qzmUD10hY367MUbAp8QGHDzT/vxihWFWY+HENyl8JZoTp1B7N2n6TGbrPxK8InUdB5a/HriOErRAqOcuS8N0JkgASWXZuL4UY3zE4GrEYslBZpwNbg/uBwSIsLqKCS5YOEv2Tq5PA6J6L05/WG8JfGCjZAvDlVLmoY="
      github_token:
        secure: "cPcbj5YU9eEuWxzfm1NPzXeZhHfBCMJXzY6PkTHkJrXDZOAPjsLsSNAotsVCFdaSHMPb5RYCKSijbVhThmlPo/Ag9SDTUPMiDHr1Se4IBK4Yo9b13KQkyWEP2h9k3q5Yc5CWnscR9SE3aezkFPRw9/fq6hkBuN4209PS4Wg3UWRTm7FpmIUhwTk98Fcg1RXRQg9lj3n99UME++5hKBsb4Cqi7lxVzb1ES2qAEMBK75aIXf0njZLY4SbhqKkb58DLV0e0dbnVTDWZdywJWa0GOy7iqIszlXWAdcCAuUmqfN+H8GuczpmRxwm7RvCiF23sqKAEYzvNUqVXz1jhV8hsLepFusziad9EgaQGDivoNLUo98QFZuSpHbAAzPRneJJpP4CWLXe5XcyGSpIoFaz9tAuLkdrpgaZGPcaYGeaLrChLkOR3x0ICpf1wYwfy+Hkr6wNfQ5mZLkn4WeIfW2s+59kHPw2Vf1ilT5kpC/075Sx8WNadEN78qHLYZT9b6SLPKZRPu+MrBMQPOrVtgxwbZxyBPuwy7QYPN6yUltE1hjNjYSyWPRCDA6WUDVJG90aGujulCP9dlajX5fvTGfEcNG53yV6YMa/dyGMntBwSO6O25O8VOV1RtxzFkpvpSQgm40jbA13lxm2jP+uMmovl5+iTe58IzoRAIzuc8VpPTwg="
php:
  - 7.1
  - 7.0
  - 5.6

env:
  global:
  - COMPOSER_ARGS="--no-interaction"

install:
  - travis_retry composer require --dev $COMPOSER_ARGS satooshi/php-coveralls:^1.0
  - travis_retry composer install $COMPOSER_ARGS
  - composer show

script:
  - composer test-coverage
  - composer cs-check
  - sonar-scanner

after_script:
  - composer upload-coverage