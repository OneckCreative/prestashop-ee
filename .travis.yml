sudo: false
dist: trusty
language: php

cache:
  directories:
    - $HOME/.sonar/cache

addons:
  sonarcloud:
    organization: "wirecard"
    token:
      secure: "pEoWOL8JL97ExllEVoyXJ4lVHzJi8j4T2SQkpVcJbEK7uDaPQIwfHm2vvDo8/TLH/T/+JKXAeYXLTohXb4j8ESN+Lubr4qKc/ptSkb9MCVG1Uu/+iVHTr/RfXRfhd2tPqN9cpmo9DOTp3sw12SyvtBEA1S10/pLRaXV+t1ZTqvPk8dYV0vOOXvdn6UEwDZudJfTWe6Trb/sxaTAJchuB9T/at+2/1WMLZZ+CEeIgj+4etiHzafNZ4ilfCeqRA/UtNqQaf9gQRILlAKLmuMyY6dZIXobeXyQM087avYq6R4NyM3XXU4JrXn3QxD0umtHgUj0rxOlCB6uA/4nphg/oD34WeJLqPyf2o6TCs+tYlbiRZXjLOU9X3q4EcQ6eJbsqBgbL/eSdPPPD0tWG0jrVIf4LjujCw6lAkzaDu2889g9T2Ob/Vf8xZDN9UCcczRrtLOq9ICG6139jPGCfI/4acOGbIr1pE2ULAcByE9v+bVKWGH36NywP1Ev5K0ldug1mhZGzLeJecq49UcjWKqgCy2cKSr4rMPoJAtsCf0K8+UMZtN2V2Jp807+d/2pB7Vd+C65XGllKEY5QxyxUf63NKJiZfUxh2ASElc3h4ENXuci/uaiAWgm0v4k1x+7D1Xcw25dzHRViZnjsbp+DgMGrlwCs9tlCtRBlN+G5xJRmuKA="
      github_token:
        secure: "cPcbj5YU9eEuWxzfm1NPzXeZhHfBCMJXzY6PkTHkJrXDZOAPjsLsSNAotsVCFdaSHMPb5RYCKSijbVhThmlPo/Ag9SDTUPMiDHr1Se4IBK4Yo9b13KQkyWEP2h9k3q5Yc5CWnscR9SE3aezkFPRw9/fq6hkBuN4209PS4Wg3UWRTm7FpmIUhwTk98Fcg1RXRQg9lj3n99UME++5hKBsb4Cqi7lxVzb1ES2qAEMBK75aIXf0njZLY4SbhqKkb58DLV0e0dbnVTDWZdywJWa0GOy7iqIszlXWAdcCAuUmqfN+H8GuczpmRxwm7RvCiF23sqKAEYzvNUqVXz1jhV8hsLepFusziad9EgaQGDivoNLUo98QFZuSpHbAAzPRneJJpP4CWLXe5XcyGSpIoFaz9tAuLkdrpgaZGPcaYGeaLrChLkOR3x0ICpf1wYwfy+Hkr6wNfQ5mZLkn4WeIfW2s+59kHPw2Vf1ilT5kpC/075Sx8WNadEN78qHLYZT9b6SLPKZRPu+MrBMQPOrVtgxwbZxyBPuwy7QYPN6yUltE1hjNjYSyWPRCDA6WUDVJG90aGujulCP9dlajX5fvTGfEcNG53yV6YMa/dyGMntBwSO6O25O8VOV1RtxzFkpvpSQgm40jbA13lxm2jP+uMmovl5+iTe58IzoRAIzuc8VpPTwg="
php:
  - 7.1
  - 7.0
  - 5.6

env:
  global:
  - COMPOSER_ARGS="--no-interaction"

install:
  - travis_retry composer require --dev $COMPOSER_ARGS satooshi/php-coveralls:^1.0
  - travis_retry composer install $COMPOSER_ARGS
  - composer show

script:
  - composer test-coverage
  - composer cs-check
  - sonar-scanner

after_script:
  - composer upload-coverage